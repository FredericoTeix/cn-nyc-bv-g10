# API Keys service

## Overview

Provides authentication and authorization features through API Keys, which can be generated by an admin 
and then consulted/revoked/refreshed/consumed by the owner of the key.  
All API Keys are generated with a defined quota that limits the amount of requests that can be consumed.  
The keys also have an associated scope, which delimits the possible actions that can be performed and
which resources can be accessed by the key.

## Configuration

### Authorization

API Keys can only have one of two possible scopes: ``ADMIN`` or ``CONSUMER``.  
A file ``acl.yaml`` can be edited to configure which resources and actions can be performed by the key scopes. Each
action can consume a different amount of usages.
An example of this file is as follows:
```yaml
endpoints:
  /trips:             # allowed resources are specified by its path only, without query parameters or any other URI property
    ADMIN:            # every resource defines which scopes can access it and what operations can be made
      GET": 0         # operations must correspond to a valid HTTP method
      PUT: 0
    CONSUMER:
      GET: 3
  /trips/{tid}:       # a path can also contain path parameters, following the template standard (surrounded by { })
    ADMIN:
      GET: 0
      DELETE: 0
    CONSUMER:
      GET: 1
```


## Running with Docker

To run the service on a Docker environment, please execute the following from the root directory:

```bash
docker compose up
```

The service will be available at port ``8080``, while its Mongo database will be available at port ``27017``.